<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Input Your Information</title>
  <link href="https://fonts.googleapis.com/css2?family=Lato&amp;display=swap" rel="stylesheet"/>
  <!-- Global site tag (gtag.js) - Google Ads -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-17226843238"></script>
<script>
  let gtagLoaded = false;

  // Load gtag.js dynamically
  const gtagScript = document.createElement('script');
  gtagScript.src = "https://www.googletagmanager.com/gtag/js?id=AW-17226843238";
  gtagScript.async = true;
  gtagScript.onload = () => {
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    window.gtag = gtag; // expose gtag to global scope
    gtag('js', new Date());
    gtag('config', 'AW-17226843238');
    gtagLoaded = true;
  };
  document.head.appendChild(gtagScript);

  // Fire conversion when ready
  function gtag_report_conversion() {
    if (gtagLoaded && typeof gtag === 'function') {
      gtag('event', 'conversion', {
        'send_to': 'AW-17226843238/EaWBCPS11oEbEOaIs5ZA',
        'value': 1.0,
        'currency': 'USD'
      });
    } else {
      console.warn('Google Ads tag not yet loaded. Conversion not fired.');
    }
  }
</script>
  <style>
    html, body { margin: 0; overflow: visible; height: auto !important; min-height: 0 !important; }
    body {
      font-family: 'Lato', sans-serif;
      padding: 20px;
    }
    h2 {
      color: #cd0f13;
    }
    .form-wrapper {
      background-color: #eeeeee;
      padding: 20px;
      border-radius: 10px;
      max-width: 100%;
    }
    form {
      width: 100%;
    }
    label {
      display: block;
      margin-top: 15px;
      margin-bottom: 2px;
    }
    input, select, button {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      box-sizing: border-box;
      font-family: 'Lato', sans-serif;
    }
    #countyGroup {
      display: none;
    }
    button {
      background-color: #cd0f13;
      color: white;
      border: none;
      border-radius: 5px;
      margin-top: 20px;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      opacity: 0.8;
    }
    .checkbox-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }
    .checkbox-wrapper {
      flex: 1 1 30%;
      min-width: 120px;
    }
    .checkbox-wrapper input[type="checkbox"] {
      display: none;
    }
    .checkbox-wrapper label {
      display: block;
      padding: 10px;
      border: 2px solid #cd0f13;
      border-radius: 5px;
      text-align: center;
      cursor: pointer;
      font-family: 'Lato', sans-serif;
      color: #cd0f13;
      background-color: white;
      transition: background-color 0.3s, color 0.3s;
    }
    .checkbox-wrapper input[type="checkbox"]:checked + label {
      background-color: #cd0f13;
      color: white;
    }
    .checkbox-wrapper label:hover {
      background-color: #f3d6d6;
    }
    

  </style>
</head>
<body>
<div class="form-wrapper">
  <h2>Input Your Information</h2>
  <form id="infoForm">
    <b><label for="name">Name:</label></b>
    <input id="name" name="Name" required type="text"/>
    <b><label for="email">Email:</label></b>
    <input id="email" name="Email" required type="email"/>
    <b><label for="phone">Phone:</label></b>
    <input id="phone" name="Phone" required type="tel"/>
    <label><b>Area of Interest</b> <small>(select at least one)</small></label>
    <div class="checkbox-group">
      <div class="checkbox-wrapper">
        <input id="agriculture" name="areaOfInterest" type="checkbox" value="Agriculture"/>
        <label for="agriculture">Agriculture</label>
      </div>
      <div class="checkbox-wrapper">
        <input id="residential" name="areaOfInterest" type="checkbox" value="Residential"/>
        <label for="residential">Residential</label>
      </div>
      <div class="checkbox-wrapper">
        <input id="commercial" name="areaOfInterest" type="checkbox" value="Commercial"/>
        <label for="commercial">Commercial</label>
      </div>
    </div>
    <b><label for="stateSelect">State:</label></b>
    <select id="stateSelect" name="State" required>
      <option value="">-- Select a State --</option>
    </select>
    <div id="countyGroup">
      <b><label for="countySelect">County:</label></b>
      <select id="countySelect" name="County" required>
        <option value="">-- Select a County --</option>
      </select>
    </div>
    <input id="pageUrl" name="pageUrl" type="hidden"/>
    <button type="submit">Submit</button>
  </form>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const stateCountyMap = {
  "DE": [
    "Kent",
    "New Castle",
    "Sussex"
  ],
  "IA": [
    "Adair",
    "Adams",
    "Appanoose",
    "Audubon",
    "Cass",
    "Clarke",
    "Dallas",
    "Davis",
    "Decatur",
    "Des Moines",
    "Fremont",
    "Guthrie",
    "Harrison",
    "Henry",
    "Jefferson",
    "Keokuk",
    "Louisa",
    "Lucas",
    "Madison",
    "Mahaska",
    "Marion",
    "Mills",
    "Monona",
    "Monroe",
    "Montgomery",
    "Muscatine",
    "Page",
    "Polk",
    "Pottawattamie",
    "Ringgold",
    "Shelby",
    "Taylor",
    "Union",
    "Van Buren",
    "Wapello",
    "Warren",
    "Washington",
    "Wayne",
    "Woodbury",
    "Allamakee",
    "Black Hawk",
    "Bremer",
    "Buchanan",
    "Butler",
    "Cedar",
    "Cerro Gordo",
    "Chickasaw",
    "Clinton",
    "Fayette",
    "Floyd",
    "Franklin",
    "Grundy",
    "Hamilton",
    "Hancock",
    "Hardin",
    "Howard",
    "Humboldt",
    "Jackson",
    "Johnson",
    "Jones",
    "Linn",
    "Mitchell",
    "Scott",
    "Winnebago",
    "Winneshiek",
    "Worth",
    "Wright",
    "Benton",
    "Boone",
    "Buena Vista",
    "Calhoun",
    "Carroll",
    "Cherokee",
    "Clay",
    "Crawford",
    "Dickinson",
    "Emmet",
    "Greene",
    "Ida",
    "Iowa",
    "Jasper",
    "Kossuth",
    "Lyon",
    "Marshall",
    "O'Brien",
    "Osceola",
    "Palo Alto",
    "Plymouth",
    "Pocahontas",
    "Poweshiek",
    "Sac",
    "Sioux",
    "Story",
    "Tama",
    "Webster",
    "Clayton",
    "Delaware",
    "Dubuque",
    "Lee"
  ],
  "IL": [
    "Bureau",
    "Lee",
    "Marshall",
    "Putnam",
    "Stark",
    "Carroll",
    "Ogle",
    "Logan",
    "Peoria",
    "Tazewell",
    "Christian",
    "Boone",
    "DeKalb",
    "Kane",
    "Lake",
    "McHenry",
    "Winnebago",
    "De Witt",
    "Livingston",
    "Macon",
    "McLean",
    "Woodford",
    "Clinton",
    "Jefferson",
    "Monroe",
    "Randolph",
    "Washington",
    "Henry",
    "Mercer",
    "Rock Island",
    "Whiteside",
    "Grundy",
    "Kendall",
    "La Salle",
    "DuPage",
    "Ford",
    "Iroquois",
    "Kankakee",
    "Will",
    "Macoupin",
    "Madison",
    "Montgomery",
    "Piatt",
    "Adams",
    "Brown",
    "Menard",
    "Morgan",
    "Pike",
    "Sangamon",
    "Schuyler",
    "Scott",
    "Bond",
    "Clay",
    "Coles",
    "Cumberland",
    "Effingham",
    "Fayette",
    "Marion",
    "Moultrie",
    "Shelby",
    "Alexander",
    "Franklin",
    "Hardin",
    "Jackson",
    "Johnson",
    "Massac",
    "Perry",
    "Pope",
    "Pulaski",
    "Saline",
    "Union",
    "Williamson",
    "St  Clair",
    "Jo Daviess",
    "Stephenson",
    "Cass",
    "Mason",
    "Champaign",
    "Clark",
    "Douglas",
    "Edgar",
    "Vermilion",
    "Calhoun",
    "Greene",
    "Jersey",
    "Crawford",
    "Edwards",
    "Gallatin",
    "Hamilton",
    "Jasper",
    "Lawrence",
    "Richland",
    "Wabash",
    "Wayne",
    "White",
    "Fulton",
    "Hancock",
    "Henderson",
    "Knox",
    "McDonough",
    "Warren"
  ],
  "IN": [
    "Benton",
    "Pulaski",
    "Starke",
    "White",
    "Jasper",
    "Newton",
    "Fountain",
    "Parke",
    "Vermillion",
    "Vigo",
    "Warren",
    "Knox",
    "Posey",
    "Sullivan",
    "Vanderburgh",
    "Warrick"
  ],
  "KY": [
    "Ballard",
    "Caldwell",
    "Calloway",
    "Carlisle",
    "Christian",
    "Crittenden",
    "Fulton",
    "Graves",
    "Hickman",
    "Livingston",
    "Lyon",
    "Marshall",
    "McCracken",
    "Trigg"
  ],
  "MD": [
    "Anne Arundel",
    "Baltimore County",
    "Caroline",
    "Cecil",
    "Dorchester",
    "Garrett",
    "Harford",
    "Kent",
    "Queen Anne s",
    "Somerset",
    "Talbot",
    "Wicomico",
    "Worcester"
  ],
  "MI": [
    "Alger",
    "Baraga",
    "Delta",
    "Dickinson",
    "Gogebic",
    "Houghton",
    "Iron",
    "Marquette",
    "Menominee",
    "Ontonagon",
    "Schoolcraft"
  ],
  "MN": [
    "Faribault",
    "Fillmore",
    "Freeborn",
    "Houston",
    "Mower",
    "Jackson",
    "Martin",
    "Nobles",
    "Rock"
  ],
  "MO": [
    "Andrew",
    "Atchison",
    "Buchanan",
    "Clay",
    "Clinton",
    "Daviess",
    "DeKalb",
    "Gentry",
    "Grundy",
    "Harrison",
    "Holt",
    "Mercer",
    "Nodaway",
    "Platte",
    "Putnam",
    "Schuyler",
    "Sullivan",
    "Worth",
    "Franklin",
    "Iron",
    "Jefferson",
    "Madison",
    "Perry",
    "St. Francois",
    "Ste. Genevieve",
    "Washington",
    "Adair",
    "Audrain",
    "Boone",
    "Callaway",
    "Carroll",
    "Chariton",
    "Clark",
    "Cole",
    "Cooper",
    "Gasconade",
    "Howard",
    "Knox",
    "Lewis",
    "Lincoln",
    "Linn",
    "Livingston",
    "Marion",
    "Moniteau",
    "Montgomery",
    "Osage",
    "Pike",
    "Ralls",
    "Randolph",
    "Scotland",
    "Shelby",
    "Bollinger",
    "Cape Girardeau",
    "Dunklin",
    "Mississippi",
    "New Madrid",
    "Pemiscot",
    "Scott",
    "Stoddard",
    "St. Charles",
    "St. Louis"
  ],
  "NE": [
    "Burt",
    "Dakota",
    "Douglas",
    "Sarpy",
    "Thurston",
    "Washington",
    "Cedar",
    "Dixon",
    "Knox",
    "Pierce",
    "Wayne"
  ],
  "NJ": [
    "Atlantic",
    "Burlington",
    "Camden",
    "Cape May",
    "Cumberland",
    "Gloucester",
    "Hunterdon",
    "Mercer",
    "Monmouth",
    "Morris",
    "Salem",
    "Somerset",
    "Warren"
  ],
  "NY": [
    "Allegany",
    "Cattaraugus",
    "Cayuga",
    "Chautauqua",
    "Chemung",
    "Chenango",
    "Cortland",
    "Genesee",
    "Lewis",
    "Livingston",
    "Madison",
    "Monroe",
    "Niagara",
    "Oneida",
    "Onondaga",
    "Ontario",
    "Orleans",
    "Oswego",
    "Otsego",
    "Schuyler",
    "Seneca",
    "Tioga",
    "Tompkins",
    "Wayne",
    "Wyoming",
    "Yates"
  ],
  "OH": [
    "Hancock",
    "Henry",
    "Putnam",
    "Seneca",
    "Wood"
  ],
  "PA": [
    "Adams",
    "Allegheny",
    "Armstrong",
    "Bedford",
    "Berks",
    "Blair",
    "Bradford",
    "Bucks",
    "Butler",
    "Cambria",
    "Centre",
    "Chester",
    "Cumberland",
    "Dauphin",
    "Delaware",
    "Erie",
    "Fayette",
    "Franklin",
    "Fulton",
    "Greene",
    "Huntingdon",
    "Indiana",
    "Juniata",
    "Lancaster",
    "Lebanon",
    "Lehigh",
    "Mifflin",
    "Montgomery",
    "Northampton",
    "Northumberland",
    "Perry",
    "Philadelphia",
    "Schuylkill",
    "Snyder",
    "Somerset",
    "Sullivan",
    "Warren",
    "Washington",
    "Westmoreland",
    "Wyoming",
    "York"
  ],
  "SD": [
    "Bon Homme",
    "Clay",
    "Hanson",
    "Hutchinson",
    "Lincoln",
    "McCook",
    "Minnehaha",
    "Turner",
    "Union",
    "Yankton"
  ],
  "TN": [
    "Lake",
    "Obion"
  ],
  "VA": [
    "Accomack",
    "Albemarle",
    "Buckingham",
    "Caroline",
    "Clarke",
    "Culpeper",
    "Cumberland",
    "Fauquier",
    "Fluvanna",
    "Frederick",
    "Goochland",
    "Greene",
    "Hanover",
    "Loudoun",
    "Louisa",
    "Madison",
    "Northampton",
    "Orange",
    "Page",
    "Powhatan",
    "Prince William",
    "Rappahannock",
    "Rockingham",
    "Shenandoah",
    "Spotsylvania",
    "Stafford",
    "Warren"
  ],
  "WI": [
    "Kenosha",
    "Racine",
    "Walworth",
    "Adams",
    "Brown",
    "Calumet",
    "Clark",
    "Columbia",
    "Crawford",
    "Dane",
    "Dodge",
    "Door",
    "Florence",
    "Fond du Lac",
    "Forest",
    "Grant",
    "Green",
    "Green Lake",
    "Iowa",
    "Iron",
    "Jackson",
    "Jefferson",
    "Juneau",
    "Kewaunee",
    "La Crosse",
    "Lafayette",
    "Langlade",
    "Lincoln",
    "Marathon",
    "Marinette",
    "Marquette",
    "Menominee",
    "Monroe",
    "Oconto",
    "Oneida",
    "Outagamie",
    "Portage",
    "Price",
    "Richland",
    "Rock",
    "Sauk",
    "Shawano",
    "Taylor",
    "Trempealeau",
    "Vernon",
    "Vilas",
    "Washington",
    "Waukesha",
    "Waupaca",
    "Waushara",
    "Winnebago",
    "Wood"
  ]
};

const form = document.getElementById("infoForm");
  const stateSelect = document.getElementById("stateSelect");
  const countySelect = document.getElementById("countySelect");
  const countyGroup = document.getElementById("countyGroup");

  // Populate State dropdown
  Object.keys(stateCountyMap).forEach(stateAbbr => {
    const option = document.createElement("option");
    option.value = stateAbbr;
    option.textContent = stateAbbr;
    stateSelect.appendChild(option);
  });

  // Show County dropdown based on State selection
  stateSelect.addEventListener("change", function () {
    const selectedState = this.value;
    countySelect.innerHTML = '<option value="">-- Select a County --</option>';
    if (stateCountyMap[selectedState]) {
      [...stateCountyMap[selectedState]].sort().forEach(county => {
        const option = document.createElement("option");
        option.value = county;
        option.textContent = county;
        countySelect.appendChild(option);
      });
      countyGroup.style.display = "block";
    } else {
      countyGroup.style.display = "none";
    }
  });

  // Handle form submission
  form.addEventListener("submit", function (e) {
    const interests = document.querySelectorAll('input[name="areaOfInterest"]:checked');
    if (interests.length === 0) {
      alert("Please select at least one Area of Interest.");
      e.preventDefault();
      return false;
    }

    const formData = {
      Name: document.getElementById("name").value,
      Email: document.getElementById("email").value,
      Phone: document.getElementById("phone").value,
      State: stateSelect.value,
      County: countySelect.value,
      Interest: Array.from(interests).map(cb => cb.value).join(", "),
      PageUrl: document.getElementById("pageUrl").value
    };

    fetch("https://prod-73.westus.logic.azure.com:443/workflows/d91855ade6aa446984ab23335705cc29/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=8xbKQlRjz1I8m4QfWilX9dlRGv7Uo3sv3zfHh0F8Q7k", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(formData)
    })
   .then(response => {
  if (response.ok) {
    document.querySelector(".form-wrapper").innerHTML = `
      <h2>Thank You!</h2>
      <p>Your information has been submitted successfully. Someone from your local FS will be reaching out to you shortly!</p>
    `;

    // Fire Google Ads conversion
    gtag('event', 'conversion', {
      'send_to': 'AW-17226843238/EaWBCPS11oEbEOaIs5ZA',
      'value': 1.0,
      'currency': 'USD',
      'event_callback': function () {
        console.log("Google Ads conversion ping sent");
      },
      'event_timeout': 2000
    });
  } else {
    alert("Submission failed. Please try again.");
  }
})

    e.preventDefault();
  });
});
</script>
  <script>
(function () {
  // Send to any origin; parent filters by origin
  const TARGET_ORIGIN = '*';

  // We will measure the visible form wrapper only (avoids viewport feedback)
  const wrapper = document.querySelector('.form-wrapper');

  function measureWrapperHeight() {
    if (!wrapper) {
      // fallback: doc scrollHeight
      return Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);
    }
    const cs = getComputedStyle(wrapper);
    const marginTop = parseFloat(cs.marginTop) || 0;
    const marginBottom = parseFloat(cs.marginBottom) || 0;
    const h = Math.ceil(wrapper.getBoundingClientRect().height + marginTop + marginBottom);
    return h;
  }

  let lastSent = 0, rafId = null;
  function sendHeight(reason) {
    const h = measureWrapperHeight();
    if (Math.abs(h - lastSent) >= 2) {
      lastSent = h;
      window.parent.postMessage({ type: 'FS_FORM_HEIGHT', height: h, reason }, TARGET_ORIGIN);
      // console.log('[FS child] post height →', h, 'reason:', reason);
    }
  }
  function queue(reason) {
    if (rafId) cancelAnimationFrame(rafId);
    rafId = requestAnimationFrame(() => sendHeight(reason));
  }

  // Initial & after fonts (font swap can change height)
  window.addEventListener('load', () => queue('load'));
  if (document.fonts && document.fonts.ready) document.fonts.ready.then(() => queue('fonts-ready'));

  // Observe wrapper changes only (less noisy than whole document)
  if (window.ResizeObserver && wrapper) {
    const ro = new ResizeObserver(() => queue('resize-observer'));
    ro.observe(wrapper);
  } else {
    // fallback heartbeat for older browsers
    setInterval(() => queue('heartbeat'), 1500);
  }

  // Respond to parent requests
  window.addEventListener('message', (event) => {
    const data = event.data || {};
    if (data.type === 'FS_REQUEST_HEIGHT') queue('parent-request');
  });

  // When state changes (county block appears), remeasure after paint
  const stateSelect = document.getElementById('stateSelect');
  if (stateSelect) stateSelect.addEventListener('change', () => setTimeout(() => queue('state-change'), 60));

  // When you swap to thank-you (innerHTML), remeasure after paint
  if (wrapper) {
    const set = Object.getOwnPropertyDescriptor(Element.prototype, 'innerHTML').set;
    Object.defineProperty(wrapper, 'innerHTML', {
      set(value) {
        set.call(this, value);
        setTimeout(() => queue('wrapper-innerHTML'), 60);
      }
    });
  }
})();
</script>

</body>
</html>
